# 基本概念

本主题为无人机和PX4使用的基础介绍（主要面向新手用户，但也是有经验用户的入门指南）。

如果您已经熟悉基本概念，可以继续阅读 [基本组装](../assembly/index.md) 学习如何连接您的特定自动驾驶硬件。
要加载固件并使用 _QGroundControl_ 设置机体，请参阅 [基本配置](../config/index.md)。

## 什么是无人机？

无人机（Unmanned Vehicles，UV）是一种可手动或自主控制的无人“机器人”装置。它们可以在空中、地面、水面/水下运行，被广泛应用于[消费、工业、政府和军事领域](https://px4.io/ecosystem/commercial-systems/)，包括航拍/视频、货物运输、竞速、搜救等应用。

更正式的分类名称包括：无人飞行器（Unmanned Aerial Vehicles，UAV）、无人地面车辆（Unmanned Ground Vehicles，UGV）、无人水面舰艇（Unmanned Surface Vehicles，USV）、无人水下航行器（Unmanned Underwater Vehicles，UUV）。

::: info
术语"无人飞行系统（Unmanned Aerial System，UAS）"通常指包含无人飞行器（UAV）及完整系统中所有其他组件的系统，包括地面控制站和/或遥控器，以及用于控制无人机、采集和处理数据的任何其他系统。
:::

## 无人机类型

存在多种不同的机体构型（类型），每个类型下又有许多变体。  
以下是部分类型及其最适用的使用场景的简要说明。

- [多旋翼](../frames_multicopter/index.md) — 多旋翼飞行器提供了精确的悬停和垂直起降能力，但飞行时间较短且通常飞行速度较慢。  
  它们是最受欢迎的飞行器类型，部分原因在于易于组装，而PX4提供了多种模式，使其飞行简单且非常适合用作摄像平台。  
- [直升机](../frames_helicopter/index.md) — 直升机与多旋翼具有相似的优势，但机械结构更复杂且效率更高。  
  它们也更难以操控。  
- [固定翼](../frames_plane/index.md) — 固定翼飞行器的飞行时间更长且速度更快，因此更适合地面测绘等任务。  
  然而它们比多旋翼更难操控和降落，且不适合需要悬停或低速飞行的场景（例如测绘垂直结构）。  
- [VTOL](../frames_vtol/index.md)（垂直起降） - 混合固定翼/多旋翼飞行器结合了两者的优势：垂直起降并像多旋翼一样悬停，随后像飞机一样转换为前进飞行以覆盖更多区域。  
  VTOL通常比多旋翼和固定翼飞行器更昂贵，且更难组装和调校。  
  它们有多种类型：倾转旋翼机（tiltrotors）、尾座式（tailsitters）、四旋翼固定翼（quadplanes）等。  
- [飞艇](../frames_airship/index.md)/[气球](../frames_balloon/index.md) — 比空气轻的飞行器通常提供高空长时间飞行，但通常以牺牲对飞行速度和方向的控制能力为代价。  
- [无人车](../frames_rover/index.md) — 类似汽车的地面车辆。  
  它们易于控制且通常使用起来很有趣。  
  它们的飞行速度不如大多数飞行器快，但能携带更重的有效载荷，并且静止时功耗较低。  
- **船只** — 水面飞行器。  
- [水下航行器](../frames_sub/index.md) — 水下飞行器。  

更多信息请参见：  

- [机体类型与设置](../airframes/index.md)  
- [机体配置](../config/airframe.md)  
- [机体参考](../airframes/airframe_reference.md)

## 自动驾驶仪

无人机的"大脑"称为自动驾驶仪。

其最小组成部分包括运行在实时操作系统（"RTOS"）上的_flight stack_软件，以及_flight controller_（FC）硬件。
飞行栈软件提供基本的稳定性和安全功能，通常还会提供一定程度的飞行员辅助，用于手动飞行以及自动化常见任务（例如起飞、降落和执行预设任务）。

某些自动驾驶仪还包含通用计算系统，可以提供"higher level"的命令和控制功能，并支持更高级的网络、计算机视觉等其他功能。
这可能通过一个独立的[companion computer](#offboard-companion-computer)实现，但未来将越来越多地作为完全集成的组件。

## PX4 飞行堆栈

[PX4](https://px4.io/) 是运行在 NuttX RTOS 上的开源自动驾驶飞行堆栈。

PX4 的核心特性包括：

- 支持多种不同的机体框架/类型，包括：[多旋翼](../frames_multicopter/index.md)、[固定翼飞机](../frames_plane/index.md)（飞机）、[VTOLs](../frames_vtol/index.md)（混合多旋翼/固定翼）、[地面车辆](../frames_rover/index.md) 和 [水下机体](../frames_sub/index.md)。
- 提供丰富的无人机组件选择，包括 [飞控](#flight-controller)、[传感器](#sensors)、[载荷](#payloads) 及其他外设设备。
- 灵活强大的 [飞行模式](#flight-modes) 和 [安全功能](#safety-settings-failsafe)。
- 与 [伴飞计算机](#offboard-companion-computer) 和 [机器人接口](../robotics/index.md)（如 [ROS 2](../ros2/user_guide.md) 和 [MAVSDK](http://mavsdk.mavlink.io)）的深度集成。

PX4 是一个更广泛的无人机平台的核心组件，该平台包含 [QGroundControl](#qgc) 地面站、[Pixhawk 硬件](https://pixhawk.org/)，以及通过 MAVLink 协议与伴飞计算机、摄像头等硬件集成的 [MAVSDK](http://mavsdk.mavlink.io)。
PX4 由 [Dronecode 项目](https://www.dronecode.org/) 提供支持。

## 地面控制站

地面控制站（GCS）是基于地面的系统，允许无人机操作员监控和控制无人机及其载荷。以下列出了一些已知可与PX4配合使用的地面控制站产品。

### QGroundControl {#qgc}

Dronecode的GCS软件名为[QGroundControl](http://qgroundcontrol.com/)（"QGC"）。  
它可以在Windows、Android、MacOS或Linux硬件上运行，支持广泛的屏幕设备类型。您可从[这里](http://qgroundcontrol.com/downloads/)免费下载。

![QGC 主界面](../../assets/concepts/qgc_fly_view.png)

QGroundControl通过遥测无线电（双向数据链路）与无人机通信，使您能够获取实时飞行和安全信息，并通过点击式界面控制机体、相机及其他载荷。在支持的硬件上，您还可以使用操纵杆控制器手动飞行机体。QGC也可用于可视化规划、执行和监控自主任务，设置地理围栏等更多功能。

QGroundControl的桌面版本还用于在无人机的自动驾驶仪/飞行控制器硬件上安装（刷写）PX4固件，并配置PX4。

### Auterion Mission Control (AMC) {#amc}

[Auterion Mission Control](https://auterion.com/product/mission-control/) 是一款功能强大且功能齐全的地面控制站应用程序，专为_飞行员_设计而非机体配置。虽然设计用于与Auterion产品配合使用，但也可以用于"vanilla" PX4。

更多信息请参见：

- [AMC 文档](https://docs.auterion.com/vehicle-operation/auterion-mission-control)
- [从Auterion Suite下载](https://suite.auterion.com/)# 无人机组件与部件

## 飞行控制器

飞行控制器 (FC) 是运行 PX4 飞行堆栈固件的硬件。它们连接到传感器以确定 PX4 的状态，并连接到执行器以控制机体。

飞行控制器硬件通常包括一个微控制器，用于处理传感器数据并生成控制信号。现代飞行控制器还集成了 GPS 模块、气压计、磁力计等传感器。

飞行控制器通过 PWM 信号或串口与执行器通信。PWM 信号用于控制舵机和电机，串口则用于与接收机、GPS 等设备通信。

飞行控制器的固件可以通过 SD 卡或串口进行更新。更新固件可以修复 bug、添加新功能或改进性能。

飞行控制器的参数可以通过地面站软件进行配置。参数包括 PID 调整、传感器校准、飞行模式等。

飞行控制器的电源由电池供电。电池电压需要稳定在安全范围内，以避免损坏飞行控制器。

飞行控制器的散热需要良好。高负载运行时，飞行控制器会产生热量，需要通过散热片或风扇进行散热。

飞行控制器的安装需要牢固。振动会影响传感器精度，因此需要使用减震垫或支架固定。

飞行控制器的调试需要工具。调试工具包括逻辑分析仪、示波器、电压表等。

飞行控制器的故障诊断需要经验。常见的故障包括传感器故障、电机故障、固件错误等。

飞行控制器的维护需要定期检查。检查内容包括连接器、焊点、电池接触等。

飞行控制器的存储需要保护。SD 卡需要防震、防潮、防静电。

飞行控制器的使用需要知识。用户需要了解飞行原理、电子知识、编程基础等。

飞行控制器的发展需要创新。新的传感器、处理器、算法将不断提升飞行性能和安全性。

飞行控制器的未来需要智能。人工智能将使飞行控制器具备自主决策能力，实现更复杂、更安全的飞行任务。

飞行控制器的标准化需要统一。统一的硬件接口、通信协议、软件架构将促进无人机行业的发展。

飞行控制器的开源需要贡献。开源社区提供了丰富的资源，用户可以参与开发、测试、文档编写等工作。

飞行控制器的教育需要普及。学校、培训机构需要开设相关课程，培养专业人才。

飞行控制器的生态需要构建。硬件厂商、软件开发者、用户需要协同合作，形成完整的生态系统。

飞行控制器的测试需要专业。测试环境需要模拟各种飞行条件，确保可靠性。

飞行控制器的认证需要规范。认证标准需要符合航空法规，确保安全性。

飞行控制器的市场需要透明。价格、性能、质量需要公开透明，促进良性竞争。

飞行控制器的创新需要持续。研发团队需要不断突破技术瓶颈，推动行业发展。

飞行控制器的普及需要努力。降低硬件成本、简化操作流程、提供技术支持，让更多人享受飞行乐趣。

飞行控制器的未来充满希望。随着技术进步，飞行控制器将变得更智能、更可靠、更强大，为无人机应用开辟更广阔的空间。

## 有效载荷

有效载荷是机体携带的设备，用于满足用户或任务目标，例如测绘任务中的相机、检测任务中使用的仪器（如辐射探测器），以及需要交付的货物。
PX4支持多种相机和广泛的有效载荷。

有效载荷连接到[飞控输出](#outputs-motors-servos-actuators)，可以通过任务自动触发，或从遥控器/操纵杆手动触发，或通过地面站（via MAVLink/MAVSDK命令）触发。

更多信息请参见：[有效载荷与相机](../payloads/index.md)

## 上锁和解锁

当所有电机和执行器通电时，机体处于_armed_（上锁）状态；当所有设备断电时，处于_disarmed_（解锁）状态。还存在一个_prearmed_（预上锁）状态，此时仅舵机执行器通电，主要用于测试。

机体通常在地面时处于解锁状态，在当前飞行模式下起飞前必须上锁。

:::warning
上锁的机体具有危险性，螺旋桨可能在没有用户进一步输入的情况下随时开始旋转，且在多数情况下会立即开始旋转。
:::

上锁和解锁默认通过RC杆_gestures_（手势）触发。在Mode 2遥控器上，通过将油门/偏航杆按在_bottom right_（右下角）保持一秒实现上锁，将杆按在bottom left（左下角）保持一秒实现解锁。也可配置PX4通过RC开关或按钮上锁（同时可通过地面站发送MAVLink上锁指令）。

为减少事故，机体在地面时应尽量减少上锁时间。默认情况下：

- 未使用时机体处于_disarmed_（解锁）或_prearmed_（预上锁）状态（电机断电），起飞前需明确执行_armed_（上锁）操作。
- 若机体在上锁后未能及时起飞，将自动解锁/预上锁（可配置解除时间）。
- 着陆后不久将自动解锁/预上锁（可配置时间）。
- 若机体状态不处于"健康"状态，将禁止上锁。
- 若机体配备[safety switch](#safety-switch)（安全开关）且未激活，将禁止上锁。
- 垂直起降（VTOL）机体处于固定翼模式时，[默认](../advanced_config/parameter_reference.md#CBRK_VTOLARMING)禁止上锁。
- 由于其他可选[上锁预条件设置](../config/safety.md#arming-pre-conditions)（如低电量）可能导致上锁被禁止。

在预上锁状态下仍可使用执行器，而解锁将切断所有电源。预上锁和解锁状态都应是安全的，特定机体可能支持其中一种或两种状态。

:::tip
有时机体无法上锁的原因可能不明显。QGC v4.2.0（写作时的每日构建版本）及后续版本在[Fly View > Arming and Preflight Checks](https://docs.qgroundcontrol.com/master/en/qgc-user-guide/fly_view/fly_view.html#arm)中提供上锁检查报告。从PX4 v1.14开始，此报告将提供全面的上锁问题信息及可能的解决方案。
:::

关于上锁和解锁配置的详细概述请参考：[Prearm, Arm, Disarm Configuration](../advanced_config/prearm_arm_disarm.md)。

## 飞行模式

模式是提供不同自动化程度和自动驾驶仪辅助功能的特殊运行状态（适用于机体操作）。  

**自主模式**完全由自动驾驶仪控制，无需飞行员/遥控器输入。  
例如可用于自动化起飞、返航和降落等常见任务。其他自主模式可执行预编程任务、跟随GPS信标，或接收外部计算机/地面站的指令。  

**手动模式**由用户通过遥控器摇杆直接控制，同时获得自动驾驶仪辅助。  
不同手动模式允许不同的飞行特性——例如某些模式支持特技动作，而其他模式则禁止翻转并可在逆风时保持位置/航向。  

:::tip  
并非所有模式都适用于所有机体类型，且部分模式的使用需要满足特定条件（例如许多模式需要全球定位估计）。  
:::  

PX4为每种机体实现的飞行模式概览如下：  

- [飞行模式 (多旋翼)](../flight_modes_mc/index.md)  
- [飞行模式 (固定翼)](../flight_modes_fw/index.md)  
- [飞行模式 (垂直起降)](../flight_modes_vtol/index.md)  
- [驱动模式 (地面车)](../flight_modes_rover/index.md)  

关于如何设置遥控器开关以启用不同飞行模式的说明，请参见[飞行模式配置](../config/flight_mode.md)。  

PX4还支持通过[ROS 2](../ros2/index.md)实现的外部模式（使用[PX4 ROS 2 Control Interface](../ros2/px4_ros2_control_interface.md)）。  
这些模式与PX4内部模式无异，可用于覆盖内部模式以实现更高级功能，或创建全新功能。  
注意：这些功能依赖于ROS 2，因此只能在配备[伴飞计算机](#offboard-companion-computer)的系统上运行。

## 安全设置（故障保护）

PX4 具有可配置的故障保护系统，可在发生异常时保护并恢复您的机体！  
这些机制允许您指定安全飞行的区域和条件，并定义故障保护触发时的应对措施（例如降落、悬停或返回指定位置）。

::: info  
您只能为**首次**故障保护事件指定操作。  
一旦发生故障保护，系统将进入特殊处理代码，因此后续的故障保护触发将由独立的系统级和机体特定代码管理。  
:::

主要的故障保护区域如下：

- 低电量  
- 遥控器（RC）信号丢失  
- 位置丢失（全局位置估算质量过低）  
- 外部设备连接丢失（例如与伴飞计算机的连接中断）  
- 数据链路丢失（例如与地面站的遥测连接中断）  
- 地理围栏违规（限制机体在虚拟圆柱体内飞行）  
- 任务故障保护（防止在新起飞位置执行之前任务）  
- 交通避让（通过应答机数据触发，例如 ADSB 应答机）

如需更多信息，请参阅：[安全设置](../config/safety.md)（基础配置）## 朝向与方向

所有机体、船只和飞行器都基于其前进方向有一个朝向或姿态。

![Frame Heading](../../assets/concepts/frame_heading.png)

::: info
对于VTOL Tailsitter，朝向是相对于多旋翼配置而言的（即机体在起飞、悬停、降落时的姿态）。
:::

要将自动驾驶仪与机体运动矢量对齐，了解机体朝向方向非常重要。
即使多旋翼从各个方向看都是对称的，它们也存在朝向！
通常制造商使用彩色螺旋桨或彩色臂架来指示朝向。

![Frame Heading TOP](../../assets/concepts/frame_heading_top.png)

在我们的插图中，我们将使用红色标记多旋翼的前螺旋桨以显示朝向。

你可以深入了解朝向的相关内容，请参考[飞行控制器方向](../config/flight_controller_orientation.md)